CREATE TABLE `ot_nodes` (
  `id` mediumint(8) unsigned NOT NULL AUTO_INCREMENT,
  `ot_id` mediumint(11) NOT NULL,
  `tipo_node_id` mediumint(10) unsigned NOT NULL COMMENT 'sla, status, etcâ€¦\n',
  `current_node_index` tinyint(3) unsigned NOT NULL DEFAULT '0',
  `grupo_responsavel` mediumint(1) DEFAULT NULL,
  `responsavel` mediumint(11) DEFAULT NULL,
  `data_criacao` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `data_inicio` timestamp NULL DEFAULT NULL,
  `data_fim` timestamp NULL DEFAULT NULL,
  `prioridade` tinyint(3) unsigned DEFAULT NULL,
  `output` mediumtext,
  `input` mediumtext,
  `parent_node_id` mediumint(8) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `fk_log_ots_ingest_ots1_idx` (`ot_id`),
  KEY `fk_log_ots_ingest_parceiros1_idx` (`responsavel`),
  KEY `fk_log_ots_ingest_tipos_campo1_idx` (`tipo_node_id`),
  KEY `grupo_responsavel` (`grupo_responsavel`),
  KEY `fk_ot_nodes_ot_nodes1_idx` (`parent_node_id`),
  CONSTRAINT `fk_log_ots_ingest_tipos_campo1` FOREIGN KEY (`tipo_node_id`) REFERENCES `tipos_node` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_ot_nodes_ots1` FOREIGN KEY (`ot_id`) REFERENCES `ots` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_ot_nodes_ot_nodes1` FOREIGN KEY (`parent_node_id`) REFERENCES `ot_nodes` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_ot_nodes_parceiros1` FOREIGN KEY (`responsavel`) REFERENCES `parceiros` (`parceiro_id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `ot_nodes_ibfk_1` FOREIGN KEY (`grupo_responsavel`) REFERENCES `grupos` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8